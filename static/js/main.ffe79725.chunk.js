(this["webpackJsonpwheres-waldo"]=this["webpackJsonpwheres-waldo"]||[]).push([[0],{20:function(e,a,t){},30:function(e,a,t){},32:function(e,a,t){},36:function(e,a,t){"use strict";t.r(a);var c=t(2),n=t(3),r=t.n(n),s=t(23),i=t.n(s),l=(t(30),t(8)),o=t.n(l),d=t(10),m=t(7);t(20),t(32);var h=function(e){var a=e.url,t=e.description,n=e.id,r=e.handleTargetPictureID;return Object(c.jsxs)("div",{className:"pictureIconContainer pulsate-bck",children:[Object(c.jsx)("div",{className:"pictureDescription",children:t}),Object(c.jsx)("div",{className:"pictureContainer",children:Object(c.jsx)("img",{src:a,alt:t,className:"pictureIcon",onClick:r.bind(this,n)})})]})},u=t(12),j=t(13),b=t(17),p=t(15),O=t(14),v=function(e){Object(p.a)(t,e);var a=Object(O.a)(t);function t(e){var c;return Object(u.a)(this,t),(c=a.call(this,e)).handleClick=function(){c.props.toggle()},c.state={name:""},c.handleChange=c.handleChange.bind(Object(b.a)(c)),c}return Object(j.a)(t,[{key:"handleChange",value:function(e){this.setState({name:e.target.value})}},{key:"render",value:function(){return Object(c.jsx)("div",{className:"modal",children:Object(c.jsx)("div",{className:"modal_content",children:Object(c.jsxs)("div",{className:"flip-in-hor-top",children:[Object(c.jsx)("span",{className:"close",onClick:this.handleClick,children:"\xd7"}),Object(c.jsx)("span",{className:"modalTitle",children:this.props.data.description}),Object(c.jsxs)("div",{className:"modalGrid",children:[Object(c.jsx)("img",{src:this.props.data.url,alt:this.props.data.description,className:"pictureSelectedIcon"}),Object(c.jsx)("div",{className:"enterName",children:Object(c.jsx)("input",{type:"text",className:"enterNameInput",name:this.state.name,placeholder:"Enter your name",onChange:this.handleChange})}),Object(c.jsxs)("div",{className:"characterIconContainer",id:"characterIcon1",children:[Object(c.jsx)("img",{src:this.props.data.characters[0].url,alt:this.props.data.characters[0].name,className:"characterIcon"}),Object(c.jsx)("div",{className:"characterName",children:this.props.data.characters[0].name})]}),Object(c.jsxs)("div",{className:"characterIconContainer",id:"characterIcon2",children:[Object(c.jsx)("img",{src:this.props.data.characters[1].url,alt:this.props.data.characters[1].name,className:"characterIcon"}),Object(c.jsx)("div",{className:"characterName",children:this.props.data.characters[1].name})]}),Object(c.jsxs)("div",{className:"characterIconContainer",id:"characterIcon3",children:[Object(c.jsx)("img",{src:this.props.data.characters[2].url,alt:this.props.data.characters[2].name,className:"characterIcon"}),Object(c.jsx)("div",{className:"characterName",children:this.props.data.characters[2].name})]}),""!==this.state.name?Object(c.jsx)("button",{className:"beginButton",onClick:this.props.handleGameStart.bind(this,this.props.id,this.state.name),children:"Start Game"}):Object(c.jsx)("button",{className:"beginButton",disabled:!0,children:"Start Game"})]})]})})})}}]),t}(n.Component),f=t(16);t(37),t(33);f.a.initializeApp({apiKey:"AIzaSyB7Oe45pVtxQIAmicJ2u9UU5_ZQBXygpJ4",authDomain:"where-s-waldo-99745.firebaseapp.com",projectId:"where-s-waldo-99745",databaseURL:"https://where-s-waldo-99745-default-rtdb.europe-west1.firebasedatabase.app/",storageBucket:"where-s-waldo-99745.appspot.com",messagingSenderId:"814018642206",appId:"1:814018642206:web:cd30ce63dc88334048490f",measurementId:"G-FEXF3P1CPC"}),console.log("Firebase is initialized.");var x=f.a.firestore(),N=(f.a.firestore.FieldValue.serverTimestamp(),f.a.database());var g=function(e){var a=e.handleGameStart,t=Object(n.useState)(-1),r=Object(m.a)(t,2),s=r[0],i=r[1],l=Object(n.useState)(!1),u=Object(m.a)(l,2),j=u[0],b=u[1],p=Object(n.useState)([]),O=Object(m.a)(p,2),f=O[0],N=O[1],g=function(e){i(e),C()},w=function(){var e=Object(d.a)(o.a.mark((function e(){var a,t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x.collection("pictureData"),t=[],e.next=4,a.get().then((function(e){e.forEach((function(e){t.push(e.data())}))}));case 4:N(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){b(!j)};return Object(n.useEffect)((function(){w()}),[]),Object(c.jsxs)("div",{className:"mainmenuContainer",children:[Object(c.jsxs)("div",{className:"mainmenuText",children:[Object(c.jsx)("div",{className:"mainmenuTitle",children:"Where's Waldo?"}),Object(c.jsx)("span",{className:"mainmenuInstructions",children:"Find Waldo and his friends as quickly as possible!"})]}),j?Object(c.jsx)(v,{toggle:C,id:s,data:f[s],handleGameStart:a}):null,Object(c.jsx)("div",{className:"iconsContainer",children:f.map((function(e){return Object(c.jsx)(h,{url:e.url,description:e.description,id:e.id,handleTargetPictureID:g})}))})]})},w=t(24);var C=function(e){var a=e.url,t=e.description,n=e.handleClick;return Object(c.jsx)("div",{className:"mainImageContainer",children:Object(c.jsx)("img",{src:"/whereswaldo"+a,alt:t,className:"mainImage",onClick:n.bind(this)})})},y=function(e){Object(p.a)(t,e);var a=Object(O.a)(t);function t(){var e;Object(u.a)(this,t);for(var c=arguments.length,n=new Array(c),r=0;r<c;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).state={timerOn:!1,timerStart:0,timerTime:0},e.startTimer=function(){e.setState({timerOn:!0,timerTime:e.state.timerTime,timerStart:Date.now()-e.state.timerTime}),e.timer=setInterval((function(){e.setState({timerTime:Date.now()-e.state.timerStart})}),10)},e.stopTimer=function(){e.setState({timerOn:!1}),clearInterval(e.timer)},e}return Object(j.a)(t,[{key:"componentDidMount",value:function(){this.startTimer()}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"render",value:function(){var e=this.state.timerTime,a=("0"+Math.floor(e/10)%100).slice(-2),t=("0"+Math.floor(e/1e3)%60).slice(-2),n=("0"+Math.floor(e/6e4)%60).slice(-2),r=("0"+Math.floor(e/36e5)).slice(-2);return Object(c.jsx)("div",{className:"Stopwatch",children:Object(c.jsxs)("div",{className:"Stopwatch-display",ref:this.props.stopwatchRef,children:[r," : ",n," : ",t," : ",a]})})}}]),t}(n.Component);var T=function(e){var a=e.playerName,t=e.gameover,n=e.charactersToFind,r=e.stopwatchRef,s=e.handleNewGame;return Object(c.jsxs)("div",{className:"headerContainer",children:[Object(c.jsx)("div",{className:"headerButtonContainer",children:Object(c.jsx)("button",{className:"headerButton",onClick:s,children:"I Give Up"})}),Object(c.jsx)("div",{className:"playerName",children:a}),t?null:Object(c.jsx)(y,{stopwatchRef:r}),Object(c.jsx)("div",{className:"charactersToFind",children:n.map((function(e){return e.found?Object(c.jsx)("div",{className:"characterHeaderIconContainer foundCharacter scale-up-hor-center",children:Object(c.jsx)("img",{src:"/whereswaldo"+e.url,alt:e.name,className:"characterHeaderIcon "})}):Object(c.jsx)("div",{className:"characterHeaderIconContainer",children:Object(c.jsx)("img",{src:"/whereswaldo"+e.url,alt:e.name,className:"characterHeaderIcon"})})}))})]})};var S=function(e){var a=e.time,t=e.playerName,n=e.handleNewGame,r=e.toggleLeaderboard;return Object(c.jsxs)("div",{className:"headerContainer",children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsxs)("div",{className:"timeAndName",children:[Object(c.jsx)("div",{className:"gameOverHeaderText",children:t}),Object(c.jsxs)("div",{className:"gameOverHeaderText",children:["Final Time - ",a]})]}),Object(c.jsxs)("div",{className:"headerButtonContainer",children:[Object(c.jsx)("button",{className:"headerButton",onClick:n,children:"New Game"}),Object(c.jsx)("button",{className:"headerButton",onClick:r,children:"Leaderboard"})]})]})},k=function(e){Object(p.a)(t,e);var a=Object(O.a)(t);function t(){var e;Object(u.a)(this,t);for(var c=arguments.length,n=new Array(c),r=0;r<c;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).handleClick=function(){e.props.toggle()},e}return Object(j.a)(t,[{key:"render",value:function(){return Object(c.jsx)("div",{className:"modal",children:Object(c.jsxs)("div",{className:"gameOverModalContent",children:[Object(c.jsx)("div",{className:"close",onClick:this.handleClick,children:"\xd7"}),Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:"modalGameOverTitle fade-in-fwd",children:"Game Over!"}),Object(c.jsxs)("div",{className:"modalFinalTime fade-in-fwd-delay",children:["Your Time - ",this.props.time]})]}),Object(c.jsxs)("div",{className:"modalButtonsContainer",children:[Object(c.jsx)("button",{className:"modalButton",onClick:this.props.handleNewGame.bind(this),children:"New Game"}),Object(c.jsx)("button",{className:"modalButton",onClick:this.props.toggleLeaderboard.bind(this),children:"Leaderboard"})]})]})})}}]),t}(n.Component);var I=function(e){var a=e.time,t=e.name,r=e.mapName,s=e.toggleLeaderboard,i=Object(n.useState)([]),l=Object(m.a)(i,2),h=l[0],u=l[1],j=function(){var e=Object(d.a)(o.a.mark((function e(){var a,t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=N.ref(r),t=[],e.next=4,a.orderByChild("seconds").limitToFirst(10).once("value",(function(e){e.forEach((function(e){t.push({name:e.val().playerName,time:e.val().finalTime})}))}));case 4:u(t),console.log(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){j()}),[]),Object(c.jsx)("div",{className:"modal",children:Object(c.jsxs)("div",{className:"gameOverModalContent pushbottom ",children:[Object(c.jsx)("span",{className:"close",onClick:s,children:"\xd7"}),Object(c.jsx)("div",{className:"modalGameOverTitle",children:"Leaderboard"}),Object(c.jsxs)("div",{className:"mapName",children:["Map : ",r]}),Object(c.jsxs)("div",{className:"leaderboardContainer flip-in-hor-top",children:[h.map((function(e){return Object(c.jsxs)("div",{className:"nameAndTimeContainer",children:[Object(c.jsx)("div",{className:"leaderboardName",children:e.name}),Object(c.jsx)("div",{className:"leaderboardTime",children:e.time})]})})),Object(c.jsxs)("div",{className:"nameAndTimeContainer yourScore",children:[Object(c.jsx)("div",{className:"leaderboardName",children:t}),Object(c.jsx)("div",{className:"leaderboardTime",children:a})]})]})]})})};var G=function(e){var a=e.gameData,t=e.playerName,r=e.handleNewGame,s=Object(n.useState)(0),i=Object(m.a)(s,2),l=i[0],h=i[1],u=Object(n.useState)(""),j=Object(m.a)(u,2),b=j[0],p=j[1],O=Object(n.useState)(!1),v=Object(m.a)(O,2),f=v[0],x=v[1],g=Object(n.useState)(!1),y=Object(m.a)(g,2),G=y[0],B=y[1],L=Object(n.useRef)(null),F=function(e,t){var c,n=Object(w.a)(a.characters);try{for(n.s();!(c=n.n()).done;){var r=c.value;if(Math.abs(e-r.x)<=40&&Math.abs(t-r.y)<=40&&!r.found)return r.found=!0,h(l+1),!0}}catch(s){n.e(s)}finally{n.f()}return!1},M=function(){window.scrollTo(0,0);var e=document.querySelector(".gameContainer");e.classList.contains("modalOpened")&&f||e.classList.toggle("modalOpened"),B(!G)},D=function(){var e=Object(d.a)(o.a.mark((function e(){var c,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.scrollTo(0,0),c=L.current.innerHTML,n=A(c),p(c),x(!0),document.querySelector(".gameContainer").classList.toggle("modalOpened"),N.ref(a.description).push().set({playerName:t,finalTime:c,seconds:n});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(e){var a=e.replace(/\s/g,"").split(":");return 60*+a[0]*60+60*+a[1]+ +a[2]+a[3]/100};return Object(c.jsxs)("div",{className:"gameContainer",children:[""!==b?Object(c.jsx)(S,{time:b,playerName:t,handleNewGame:r,toggleLeaderboard:M}):Object(c.jsx)(T,{playerName:t,gameover:f,charactersToFind:a.characters,charactersFound:l,stopwatchRef:L,handleNewGame:r}),f?G?Object(c.jsx)(I,{time:b,name:t,mapName:a.description,toggleLeaderboard:M}):Object(c.jsx)(k,{time:b,name:t,handleNewGame:r,toggle:function(){x(!f),document.querySelector(".gameContainer").classList.toggle("modalOpened")},toggleLeaderboard:M}):G?Object(c.jsx)(I,{time:b,name:t,mapName:a.description,toggleLeaderboard:M}):null,Object(c.jsx)(C,{url:a.url,characters:a.characters,description:a.description,handleClick:function(e){var a=e.target.getBoundingClientRect(),t=e.clientX-a.left,c=e.clientY-a.top;F(t,c)&&2===l&&D()}})]})};var B=function(){var e=Object(n.useState)(!1),a=Object(m.a)(e,2),t=a[0],r=a[1],s=Object(n.useState)(""),i=Object(m.a)(s,2),l=i[0],h=i[1],u=Object(n.useState)([]),j=Object(m.a)(u,2),b=j[0],p=j[1],O=function(){var e=Object(d.a)(o.a.mark((function e(a,t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(a);case 2:h(t),r(!0);case 4:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(o.a.mark((function e(a){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.collection("pictureData").doc(a.toString()),e.next=3,t.get().then((function(e){e.exists?(p(e.data()),console.log(e.data())):console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)}));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(c.jsx)("div",{className:"App",children:t?Object(c.jsx)(G,{gameData:b,playerName:l,handleNewGame:function(){r(!1)}}):Object(c.jsx)(g,{handleGameStart:O})})};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(B,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.ffe79725.chunk.js.map